{% extends "base.html" %}

{% block link %}

    <link rel="stylesheet" href="{{ STATIC_URL }}file_upload/css/jquery.fileupload-ui.css">
    <link rel="stylesheet" href="{{ STATIC_URL }}file_upload/css/jquery.fileupload.css">
    <link rel="stylesheet" href="{{ STATIC_URL }}toast_message/jquery.toastmessage.css">
    <link rel="stylesheet" href="{{ STATIC_URL }}jquery-validate/jquery.validate.css">
    <link rel="stylesheet" href="{{ STATIC_URL }}switchery/dist/switchery.css"/>
    <script src="{{ STATIC_URL }}switchery/dist/switchery.js"></script>
    <style type="text/css">
        #footer {
            margin-top: 20px;
        }
        img#normal-content {
            max-height: 170px;
            max-width: 200px;
        }
    </style>

{% endblock %}
{% block navigation %}
    <div class="navigation-div">
        <ul class="breadcrumb">
            <li>频道管理<span class="divider">/</span></li>
            <li><a style="text-decoration: none;" href="/content/android/new_channels">Android频道</a><span class="divider">/</span></li>
            <li><a href="{% url 'android_sub_channel' %}?select_channel={{ channel.id }}">{{ channel.title }}频道</a><span class="divider">/</span></li>
            {% if subchannel.is_editable_box %}
                <li><a href="{% url 'android_sub_channel_modules' %}?select_channel={{ channel.id }}&select_subchannel={{subchannel.id }}">{{ subchannel.title }}子频道</a><span class="divider">/</span></li>
                <li class="active">{{ module.title }}抽屉-新增固定视频</li>
            {% endif %}
            {% if subchannel.is_editable_video_list %}
                <li class="active">{{ subchannel.title }}子频道-新增固定视频</li>
            {% endif %}
        </ul>
    </div>
{% endblock %}

{% block content %}
    <div class="container">
        <div class="row-fluid">
            <form method="post">
                <div id="div_for_video_type" style="margin-bottom: 30px;margin-left:180px" >
                <h5>视频类型:</h5>

                <select class="form-control" id="video_type" name="video_type" placeholder="">
                {% for type in video_type_list %}
                    <option value="{{ type.name }}"
                       {% ifequal type.id 1 %}
                            selected="selected"
                       {% endifequal %}
                            >
                        {{ type.desc }}</option>
                {% endfor %}
                </select>
                <h5>固定位置:</h5>
                <select class="form-control" id="fixed_position" name="fixed_position" placeholder="">
                {% for idx in fixed_position_list %}
                    <option value="{{ idx }}">{{ idx }}
                      </option>
                {% endfor %}
                </select>
                <div class="alert alert-warning">若位置序号缺失，说明此位置已有固定视频</div>
                </div>
                <input type="hidden" name="channel_id" value="{{ current_channel_id }}">
                <input type="hidden" name="subchannel_id" id="subchannel_id" value="{{ current_subchannel_id }}">
                <input type="hidden" name="module_id" id="module_id" value="{{ current_module_id }}">
                <!-- <textarea for="url_filed" name="url" cols="3" rows="6"></textarea> -->
                <div id="div_for_video_type_field" style="margin-left: 180px"></div>


                <div id="footer">
                    <button type="submit" class="btn"><i class="icon-ok-sign"></i>确定</button>
                    <a class="btn" href="{% url "android_fixed_position_videos"  %}?channel_id={{ current_channel_id }}&subchannel_id={{ current_subchannel_id }}&module_id={{ current_module_id }}"><i class="icon-circle-arrow-left"></i>返回</a>
                </div>
            </form>
        </div>
    </div>
{% endblock %}



{% block js %}
    <script src="{{ STATIC_URL }}jquery-validate/jquery.validate.js"></script>
    <script src="{{ STATIC_URL }}file_upload/js/vendor/jquery.ui.widget.js"></script>
    <script src="{{ STATIC_URL }}file_upload/js/jquery.iframe-transport.js"></script>
    <script src="{{ STATIC_URL }}file_upload/js/jquery.fileupload.js"></script>
    <script type="text/javascript">{% include "common_module/image_upload.js" %}</script>
    <script type="text/javascript">
        {% include "android/channel/fixed_position_videos/_add_video_validate.js" %}
        $(document).ready(function () {
            var type_selector = $("#video_type");
            type_selector.change(function () {
                var selected_video_type = $("#video_type").val();
                $("#div_for_video_type_field").load("/content/android/channel_page/add/video_field",
                       {
                            "video_type": selected_video_type,
                            'show_button_tag':'{{ show_button_tag }}',
                            's_image_tag':'{{ s_image_tag }}',
                            'game_banner_tag':'{{ game_banner_tag }}'
                        });
            });
            type_selector.trigger('change');
        })
    </script>
{% endblock %}