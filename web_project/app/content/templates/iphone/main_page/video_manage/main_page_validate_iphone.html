<script src="{{ STATIC_URL }}jquery-validate/jquery.validate.js"></script>
<script type="text/javascript">
    $(function () {
        var validate_rules;
        var validate_form = function (form_selector, options) {
            var default_options = {
                errorPlacement: function (error, element) {
                    element.addClass('error');
                    error.css({"padding-left": "0", "color": "#933", "display": "block"});
                    if (element.attr('name') === 'original_game_id') {
                        return element.next().after(error);
                    } else {
                        return error.prependTo(element.parent());
                    }
                },
                submitHandler: function (form) {
                    var video_type = $("select[name='video_type']").val() || $("input[name='video_type']").val();
                    if (video_type === 'game_details') {
                        var game_name = $("input[name='game_appname']").val();
                        if (game_name === '' || game_name === null) {
                            alert("请先通过游戏ID获取游戏信息~~");
                            return false;
                        }
                    }
                    return form.submit();
                },
                success: function (label) {
                },
                highlight: function (element, errorClass) {
                }
            };
            options = $.extend(default_options, options);
            // custom named field messages
            options = $.extend(options,
                    {messages: {cid: "填个整数啊～亲"}
                    });

            // custom the messages of different type fields
            var mes_obj = {};
            var mes = $.validator.messages;
            for (var k in mes) {
                if (typeof mes[k] !== 'function') {
                    mes_obj[k] = mes[k] + ' (｡･ω･｡) ';
                }
            }
            $.extend(mes, mes_obj);

            return $(form_selector).validate(options);
        };
        validate_rules = {
            'url': {
                'required': true,
                'url': true
            },
            'title': 'required',
            'video_id': 'required',
            'game_page_id': 'required',
            'original_game_id': 'required',
            'h_image': 'required'

        };
        validate_form('form#mainPageContent', {
                    rules: validate_rules,
                    ignore: []
                }
        );
    });
</script>